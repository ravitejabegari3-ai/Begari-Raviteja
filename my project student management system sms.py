import tkinter as tk
import os

root = tk.Tk()
root.title("Student Management System")
root.geometry("450x480")

students = []
file_name = "students.txt"

# Load existing data
if os.path.exists(file_name):
    with open(file_name, "r") as file:
        for line in file:
            students.append(line.strip())

# Title
title = tk.Label(root, text="Student Management System", font=("Arial", 16))
title.pack(pady=10)

# Name
tk.Label(root, text="Student Name").pack()
name_entry = tk.Entry(root)
name_entry.pack()

# Roll
tk.Label(root, text="Roll Number").pack()
roll_entry = tk.Entry(root)
roll_entry.pack()

# Branch
tk.Label(root, text="Branch").pack()
branch_entry = tk.Entry(root)
branch_entry.pack()

# Listbox
student_listbox = tk.Listbox(root, width=50)
student_listbox.pack(pady=10)

# Show old students
for student in students:
    student_listbox.insert(tk.END, student)

def save_to_file():
    with open(file_name, "w") as file:
        for student in students:
            file.write(student + "\n")

def add_student():
    name = name_entry.get()
    roll = roll_entry.get()
    branch = branch_entry.get()

    student = f"{name} | {roll} | {branch}"
    students.append(student)

    student_listbox.insert(tk.END, student)
    save_to_file()

    name_entry.delete(0, tk.END)
    roll_entry.delete(0, tk.END)
    branch_entry.delete(0, tk.END)

def delete_student():
    selected = student_listbox.curselection()
    if selected:
        index = selected[0]
        student_listbox.delete(index)
        students.pop(index)
        save_to_file()

def load_selected_student():
    selected = student_listbox.curselection()
    if selected:
        index = selected[0]
        data = students[index].split(" | ")

        name_entry.delete(0, tk.END)
        name_entry.insert(0, data[0])

        roll_entry.delete(0, tk.END)
        roll_entry.insert(0, data[1])

        branch_entry.delete(0, tk.END)
        branch_entry.insert(0, data[2])

def update_student():
    selected = student_listbox.curselection()
    if selected:
        index = selected[0]

        name = name_entry.get()
        roll = roll_entry.get()
        branch = branch_entry.get()

        updated = f"{name} | {roll} | {branch}"
        students[index] = updated

        student_listbox.delete(index)
        student_listbox.insert(index, updated)
        save_to_file()

# Buttons
tk.Button(root, text="Add Student", command=add_student).pack(pady=5)
tk.Button(root, text="Delete Selected", command=delete_student).pack(pady=5)
tk.Button(root, text="Load Selected", command=load_selected_student).pack(pady=5)
tk.Button(root, text="Update Student", command=update_student).pack(pady=5)

root.mainloop()



















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































